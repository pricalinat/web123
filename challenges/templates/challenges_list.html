{% load staticfiles %}
<!DOCTYPE html>
<html>
<head>

     <title>Challenge</title>
     <meta charset="UTF-8">
     <meta http-equiv="X-UA-Compatible" content="IE=Edge">
     <meta name="description" content="">
     <meta name="keywords" content="">
     <meta name="author" content="">
     <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

     <link rel="stylesheet" href="{% static 'css/bootstrap.min.css' %}">
     <link rel="stylesheet" href="{% static 'css/magnific-popup.css' %}">
     <link rel="stylesheet" href="{% static 'css/font-awesome.min.css' %}">

     <!-- MAIN CSS -->
     <link rel="stylesheet" href="{% static 'css/templatemo-style.css' %}">
     <link rel="stylesheet" href="{% static 'css/challenges.css' %}">
    <script src="{%static 'js/jquery.js' %}"></script>

     <script src="{%static 'js/jquery.stellar.min.js' %}"></script>
     <script src="{%static 'js/jquery.magnific-popup.min.js' %}"></script>
</head>
<body>

     <!-- PRE LOADER -->
     <section class="preloader">
          <div class="spinner">
               <span class="spinner-rotate"></span>
          </div>
     </section>


     <!-- MENU -->
     <section class="navbar custom-navbar navbar-fixed-top" role="navigation">
          <div class="container">

               <div class="navbar-header">
                    <button class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                         <span class="icon icon-bar"></span>
                         <span class="icon icon-bar"></span>
                         <span class="icon icon-bar"></span>
                    </button>

                    <!-- lOGO TEXT HERE -->
                    <a href="/accounts/" class="navbar-brand">MyCTF</a>
               </div>

               <!-- MENU LINKS -->
               <div class="collapse navbar-collapse">
                    <ul class="nav navbar-nav navbar-nav-first">
                         <li><a href="#home" class="smoothScroll">Home</a></li>
                         <li><a href="#re" class="smoothScroll">Re</a></li>
                         <li><a href="#pwn" class="smoothScroll">Pwn</a></li>
                         <li><a href="#web" class="smoothScroll">Web</a></li>
                         <li><a href="#crypto" class="smoothScroll">Crypto</a></li>
                         <li><a href="/challenges/collection/" class="smoothScroll">Collection</a></li>
                         <li><a href="/challenges/sortedByDif/" class="smoothScroll">Switch</a></li>
                         <li><a href="/exam/set_exam/" class="smoothScroll">Exam</a></li>
                    </ul>

                    <ul class="nav navbar-nav navbar-right">
                         <li class="section-btn" id="logout"><a href="/accounts/logout/">Logout</a></li>
                    </ul>
               </div>

          </div>
     </section>


     <!-- BLOG HEADER -->
     <section id="blog-header" data-stellar-background-ratio="0.5">
          <div class="overlay"></div>
          <div class="container">
               <div class="row">

                    <div class="col-md-offset-1 col-md-5 col-sm-12">
                         <h2>{{isCollection}}</h2>
                    </div>
                    
               </div>
          </div>
     </section>


     <!-- BLOG DETAIL -->
     <section id="re" data-stellar-background-ratio="0.5">
          <div class="container">
               <div class="row"><br>
                    <div class="col-md-12 col-sm-12">
                         <div class="section-title">
                             <br><br><br>
                              <h2>Re</h2>
                              <span class="line-bar">...</span>
                         </div>
                    </div>
                    {% if data_re %}
                        {% for mission in data_re %}
                            <div class="col-md-4 col-sm-6">
                            {% if mission.is_solved == 1  %}
                                <div class="solved_mission"  data-toggle="modal" data-target="#{{ mission.id }}" id="display_{{ mission.id }}">
                                <p style="color:white;">{{ mission.name }}</p>
                                <p style="color:white;">{{ mission.point }}</p>
                                </div>
                            {% else %}
                                <div class="mission"  data-toggle="modal" data-target="#{{ mission.id }}" id="display_{{ mission.id }}">
                                    <p style="color:white;">{{ mission.name }}</p>
                                    <p style="color:white;">{{ mission.point }}</p>
                                </div>
                            {% endif %}
                            </div>
                            <div class="modal fade" id="{{ mission.id }}" role="dialog" data-backdrop="static">
                                <div class="modal-dialog">
                                    <div class="modal-content">
                                        <div class="modal-header">
                                            <button type="button" class="close closeIT" data-dismiss="modal">&times;</button>
                                            <h4 class="modal-title">{{ mission.name }}</h4>
                                        </div>
                                        <div class="modal-body">
                                            <p><b>Challenge Description: </b></p>
                                            {% if mission.message %}
                                                <p>{{ mission.message }}</p>
                                            {% else %}
                                                暂无
                                            {% endif %}
                                            {% if mission.file %}
                                                <p><b>File:</b> <a href="uploads/{{ mission.file }}">download</a></p>
                                            {% endif %}
                                            <p><b>Points: </b>{{ mission.point }}</p>
                                            <form method="post" id="{{ mission.id }}_flag_form" action="/challenges/{{ mission.id }}/">
                                                {% csrf_token %}
                                                <input type="text" name="{{ mission.id }}_flag" class="input_flag" placeholder="Submit Flag" id="{{ mission.id }}_flag" autofocus>
                                                <br><br><button type="submit" name="submit" class="input_flag_button">Submit</button>
                                                <br>
                                                <br>
                                                <h3 id="{{ mission.id }}_flag_form_tishi"></h3>
                                            </form>
                                            {% if mission.is_collected %}
                                                <a id="{{ mission.id }}_collect" href="/challenges/collect/{{ mission.id }}/">取消收藏</a>
                                            {% else %}
                                                <a id="{{ mission.id }}_collect" href="/challenges/collect/{{ mission.id }}/">收藏</a>
                                            {% endif %}
                                        </div>

                                    </div>
                                </div>
                            </div>

                            <script type="text/javascript">
                                $(document).ready(function (){
                                    $("#{{ mission.id }}_flag_form").submit(function(event) {
                                        $.ajax({
                                            type : "POST",
                                            url : "/challenges/{{ mission.id }}/",
                                            data : $(this).serialize(),
                                            success : function(response) {
                                                $("#{{ mission.id }}_flag_form_tishi").html(response)
                                            }
                                        });
                                        event.preventDefault();
                                    });
                                });

                            </script>

                        {% endfor %}

                    {% else %}
                        <p style="color: red">None</p>
                    {% endif %}



               </div>
          </div>
     </section>

     <section id="pwn" data-stellar-background-ratio="0.5" style="background-color: #ddfffc">
          <div class="container">
               <div class="row"><br>
                    <div class="col-md-12 col-sm-12">
                         <div class="section-title">
                             <br><br><br>
                              <h2>Pwn</h2>
                              <span class="line-bar">...</span>
                         </div>
                    </div>

                    {% if  data_pwn%}
                    {% for mission in data_pwn %}
                        <div class="col-md-4 col-sm-6">
                            {% if mission.is_solved == 1  %}
                                <div class="solved_mission"  data-toggle="modal" data-target="#{{ mission.id }}" id="display_{{ mission.id }}">
                                <p style="color:white;">{{ mission.name }}</p>
                                <p style="color:white;">{{ mission.point }}</p>
                                </div>
                            {% else %}
                                <div class="mission"  data-toggle="modal" data-target="#{{ mission.id }}" id="display_{{ mission.id }}">
                                    <p style="color:white;">{{ mission.name }}</p>
                                    <p style="color:white;">{{ mission.point }}</p>
                                </div>
                            {% endif %}

                        </div>


                        <div class="modal fade" id="{{ mission.id }}" role="dialog" data-backdrop="static">
                            <div class="modal-dialog">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <button type="button" class="close closeIT" data-dismiss="modal">&times;</button>
                                        <h4 class="modal-title">{{ mission.name }}</h4>
                                    </div>
                                    <div class="modal-body">
                                        <p><b>Challenge Description: </b></p>
                                        {% if mission.message %}
                                            <p>{{ mission.message }}</p>
                                        {% else %}
                                            暂无
                                        {% endif %}
                                        <p><b>Scene: </b><a href="{{mission.scene}}" target="_blank">{{ mission.scene }}</a></p>
                                        {% if mission.file %}
                                            <p><b>File:</b> <a href="uploads/{{ mission.file }}">download</a></p>
                                        {% endif %}
                                        <p><b>Points: </b>{{ mission.point }}</p>
                                        <form method="post" id="{{ mission.id }}_flag_form" action="/challenges/{{ mission.id }}/">
                                            {% csrf_token %}
                                            <input type="text" name="{{ mission.id }}_flag" class="input_flag" placeholder="Submit Flag" id="{{ mission.id }}_flag" autofocus="">
                                            <br><br><button type="submit" name="submit" class="input_flag_button">Submit</button>
                                            <br>
                                            <br>
                                            <h3 id="{{ mission.id }}_flag_form_tishi"></h3>
                                        </form>
                                        {% if mission.is_collected %}
                                            <a id="{{ mission.id }}_collect" href="/challenges/collect/{{ mission.id }}/">取消收藏</a>
                                        {% else %}
                                            <a id="{{ mission.id }}_collect" href="/challenges/collect/{{ mission.id }}/">收藏</a>
                                        {% endif %}
                                    </div>

                                </div>
                            </div>
                        </div>

                        <script type="text/javascript">
                            $(document).ready(function (){
                                $("#{{ mission.id }}_flag_form").submit(function(event) {
                                    $.ajax({
                                        type : "POST",
                                        url : "/challenges/{{ mission.id }}/",
                                        data : $(this).serialize(),
                                        success : function(response) {
                                            $("#{{ mission.id }}_flag_form_tishi").html(response)
                                        }
                                    });
                                    event.preventDefault();
                                });
                            });
                        </script>

                    {% endfor %}

                {% else %}
                    <p style="color: red">None</p>
                {% endif %}


               </div>
          </div>
     </section>

     <section id="web" data-stellar-background-ratio="0.5">
          <div class="container">
               <div class="row">
               <div class="col-md-12 col-sm-12">
                 <div class="section-title">
                     <br><br><br>
                      <h2>Web</h2>
                      <span class="line-bar">...</span>
                 </div>
            </div>
                    {% if data_web %}
                    {% for mission in data_web %}
                        <div class="col-md-4 col-sm-6">
                            {% if mission.is_solved == 1 %}
                                <div class="solved_mission"  data-toggle="modal" data-target="#{{ mission.id }}" id="display_{{ mission.id }}">
                                <p style="color:white;">{{ mission.name }}</p>
                                <p style="color:white;">{{ mission.point }}</p>
                                </div>
                            {% else %}
                                <div class="mission"  data-toggle="modal" data-target="#{{ mission.id }}" id="display_{{ mission.id }}">
                                    <p style="color:white;">{{ mission.name }}</p>
                                    <p style="color:white;">{{ mission.point }}</p>
                                </div>
                            {% endif %}
                        </div>
                        <div class="modal fade" id="{{ mission.id }}" role="dialog" data-backdrop="static">
                            <div class="modal-dialog">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <button type="button" class="close closeIT" data-dismiss="modal">&times;</button>
                                        <h4 class="modal-title">{{ mission.name }}</h4>
                                    </div>
                                    <div class="modal-body">
                                        <p><b>Challenge Description: </b></p>
                                        {% if mission.message %}
                                            <p>{{ mission.message }}</p>
                                        {% else %}
                                            暂无
                                        {% endif %}
                                        <p><b>Scene: </b><a href="{{mission.scene}}" target="_blank">{{ mission.scene }}</a></p>
                                        {% if mission.file %}
                                            <p><b>File:</b> <a href="uploads/{{ mission.file }}">download</a></p>
                                        {% endif %}
                                        <p><b>Points: </b>{{ mission.point }}</p>
                                        <form method="post" id="{{ mission.id }}_flag_form" action="/challenges/{{ mission.id }}/">
                                            {% csrf_token %}
                                            <input type="text" name="{{ mission.id }}_flag" class="input_flag" placeholder="Submit Flag" id="{{ mission.id }}_flag" autofocus="">
                                            <br><br><button type="submit" name="submit" class="input_flag_button">Submit</button>
                                            <br>
                                            <h3 id="{{ mission.id }}_flag_form_tishi"></h3>
                                        </form>
                                        {% if mission.is_collected %}
                                            <a id="{{ mission.id }}_collect" href="/challenges/collect/{{ mission.id }}/">取消收藏</a>
                                        {% else %}
                                            <a id="{{ mission.id }}_collect" href="/challenges/collect/{{ mission.id }}/">收藏</a>
                                        {% endif %}
                                    </div>

                                </div>
                            </div>
                        </div>

                        <script type="text/javascript">
                            $(document).ready(function (){
                                $("#{{ mission.id }}_flag_form").submit(function(event) {
                                    $.ajax({
                                        type : "POST",
                                        url : "/challenges/{{ mission.id }}/",
                                        data : $(this).serialize(),
                                        success : function(response) {
                                            $("#{{ mission.id }}_flag_form_tishi").html(response)
                                        }
                                    });
                                    event.preventDefault();
                                });
                            });
                        </script>

                    {% endfor %}

                {% else %}
                    <p style="color: red">None</p>
                {% endif %}


               </div>
          </div>
     </section>

     <section id="crypto" data-stellar-background-ratio="0.5" style="background-color: #ddfffc">
          <div class="container">
               <div class="row"><br>
                    <div class="col-md-12 col-sm-12">
                         <div class="section-title">
                              <h2>Crypto</h2>
                              <span class="line-bar">...</span>
                         </div>
                    </div>

                    {% if  data_c%}
                    {% for mission in data_c %}
                        <div class="col-md-4 col-sm-6">
                            {% if mission.is_solved == 1  %}
                                <div class="solved_mission"  data-toggle="modal" data-target="#{{ mission.id }}" id="display_{{ mission.id }}">
                                <p style="color:white;">{{ mission.name }}</p>
                                <p style="color:white;">{{ mission.point }}</p>
                                </div>
                            {% else %}
                                <div class="mission"  data-toggle="modal" data-target="#{{ mission.id }}" id="display_{{ mission.id }}">
                                    <p style="color:white;">{{ mission.name }}</p>
                                    <p style="color:white;">{{ mission.point }}</p>
                                </div>
                            {% endif %}

                        </div>


                        <div class="modal fade" id="{{ mission.id }}" role="dialog" data-backdrop="static">
                            <div class="modal-dialog">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <button type="button" class="close closeIT" data-dismiss="modal">&times;</button>
                                        <h4 class="modal-title">{{ mission.name }}</h4>
                                    </div>
                                    <div class="modal-body">
                                        <p><b>Challenge Description: </b></p>
                                        {% if mission.message %}
                                            <p>{{ mission.message }}</p>
                                        {% else %}
                                            暂无
                                        {% endif %}
                                        {% if mission.file %}
                                            <p><b>File:</b> <a href="uploads/{{ mission.file }}">download</a></p>
                                        {% endif %}
                                        <p><b>Points: </b>{{ mission.point }}</p>
                                        <form method="post" id="{{ mission.id }}_flag_form" action="/challenges/{{ mission.id }}/">
                                            {% csrf_token %}
                                            <input type="text" name="{{ mission.id }}_flag" class="input_flag" placeholder="Submit Flag" id="{{ mission.id }}_flag" autofocus="">
                                            <br><br><button type="submit" name="submit" class="input_flag_button">Submit</button>
                                            <br>
                                            <h3 id="{{ mission.id }}_flag_form_tishi"></h3>
                                        </form>
                                        {% if mission.is_collected %}
                                            <a id="{{ mission.id }}_collect" href="/challenges/collect/{{ mission.id }}/">取消收藏</a>
                                        {% else %}
                                            <a id="{{ mission.id }}_collect" href="/challenges/collect/{{ mission.id }}/">收藏</a>
                                        {% endif %}
                                    </div>

                                </div>
                            </div>
                        </div>

                        <script type="text/javascript">
                            $(document).ready(function (){
                                $("#{{ mission.id }}_flag_form").submit(function(event) {
                                    $.ajax({
                                        type : "POST",
                                        url : "/challenges/{{ mission.id }}/",
                                        data : $(this).serialize(),
                                        success : function(response) {
                                            $("#{{ mission.id }}_flag_form_tishi").html((response))
                                        }
                                    });
                                    event.preventDefault();
                                });
                            });
                        </script>

                    {% endfor %}

                {% else %}
                    <p style="color: red">None</p>
                {% endif %}


               </div>
          </div>
     </section>

     <!-- FOOTER -->
     <footer data-stellar-background-ratio="0.5">
          <div class="container">
               <div class="row">

                    <div class="col-md-5 col-sm-12">
                         <div class="footer-thumb footer-info">
                              <h2>MyCTF</h2>
                              <p>CTF (Capture The Flag) is originated in the 1996 DEFCON Global Hacking Conference, a competitive game among cybersecurity enthusiasts.</p>
                         </div>
                    </div>

                    <div class="col-md-2 col-sm-4">
                         <div class="footer-thumb">
                              <h2>Rank</h2>
                              <ul class="footer-link">
                                   <li><a href="/scoreboard/">Personal</a></li>
                                   <li><a href="/scoreboard/">Team</a></li>
                                   <li><a href="/scoreboard">Challenge</a></li>
                              </ul>
                         </div>
                    </div>

                    <div class="col-md-2 col-sm-4">
                         <div class="footer-thumb">
                              <h2>Challenge</h2>
                              <ul class="footer-link">
                                   <li><a href="/challenges/">Pwn</a></li>
                                   <li><a href="/challenges/">Web</a></li>
                                   <li><a href="/challenges/">Re</a></li>
                              </ul>
                         </div>
                    </div>

                    <div class="col-md-3 col-sm-4">
                         <div class="footer-link">
                              <h2>Team</h2>
                              <li><a href="/teams/">Create</a></li>
                              <li><a href="/teams/">Join</a></li>
                         </div>
                    </div>
                    <div class="col-md-12 col-sm-12">
                         <div class="footer-bottom">
                              <div class="col-md-6 col-sm-5">
                                   <div class="copyright-text">
                                        <p>Copyright &copy; 2019 MyCTF</p>
                                   </div>
                              </div>
                              <div class="col-md-6 col-sm-7">
                                   <div class="phone-contact">
                                        <p>Call us <span>15632721215</span></p>
                                   </div>
                              </div>
                         </div>
                    </div>

               </div>
          </div>
     </footer>


     <script src="{%static 'js/bootstrap.min.js' %}"></script>
     <script src="{%static 'js/smoothscroll.js' %}"></script>
     <script src="{%static 'js/custom.js' %}"></script>
     <script>
        document.getElementById('logout').onclick = function(){
             if(confirm('确定要退出吗')==true){
               return true;
            }else{
               return false;

            }
        }
    </script>
</body>
</html>